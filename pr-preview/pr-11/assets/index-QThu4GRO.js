var H=Object.defineProperty;var w=p=>{throw TypeError(p)};var z=(p,e,t)=>e in p?H(p,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):p[e]=t;var y=(p,e,t)=>z(p,typeof e!="symbol"?e+"":e,t),R=(p,e,t)=>e.has(p)||w("Cannot "+t);var o=(p,e,t)=>(R(p,e,"read from private field"),t?t.call(p):e.get(p)),s=(p,e,t)=>e.has(p)?w("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(p):e.set(p,t),l=(p,e,t,n)=>(R(p,e,"write to private field"),n?n.call(p,t):e.set(p,t),t),a=(p,e,t)=>(R(p,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const P of r)if(P.type==="childList")for(const k of P.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&n(k)}).observe(document,{childList:!0,subtree:!0});function t(r){const P={};return r.integrity&&(P.integrity=r.integrity),r.referrerPolicy&&(P.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?P.credentials="include":r.crossOrigin==="anonymous"?P.credentials="omit":P.credentials="same-origin",P}function n(r){if(r.ep)return;r.ep=!0;const P=t(r);fetch(r.href,P)}})();function _(){return new Map([["K",{light:"K",dark:"k"}],["Q",{light:"Q",dark:"q"}],["R",{light:"R",dark:"r"}],["B",{light:"B",dark:"b"}],["N",{light:"N",dark:"n"}],["P",{light:"P",dark:"p"}],["k",{light:"Ц",dark:"ц"}],["q",{light:"Ф",dark:"ф"}],["r",{light:"Л",dark:"л"}],["b",{light:"С",dark:"с"}],["n",{light:"К",dark:"к"}],["p",{light:"П",dark:"п"}],[" ",{light:"_",dark:"-"}]])}function J(){return new Map([["K","0"],["Q","1"],["R","2"],["B","3"],["N","4"],["P","5"],["k","6"],["q","7"],["r","8"],["b","9"],["n",":"],["p",";"],[" ","_"]])}var m,g,i,C,L,K,A;class j{constructor(){s(this,i);s(this,m,_());s(this,g,J())}reverse(e){return e.split("").reverse().join("")}encode({fen:e,colored:t}){return t?a(this,i,L).call(this,e):a(this,i,C).call(this,e)}}m=new WeakMap,g=new WeakMap,i=new WeakSet,C=function(e){let t="";return a(this,i,K).call(this,e,(n,r)=>{const P=r*9&8?"dark":"light";t+=o(this,m).get(n)[P]}),{board:t,masks:null}},L=function(e){let t="",n="";return a(this,i,K).call(this,e,r=>{t+=o(this,m).get(r).light,n+=o(this,g).get(r)}),{board:t,masks:n}},K=function(e,t){[...a(this,i,A).call(this,e)].forEach((n,r)=>t(n,r))},A=function(e){return e.split(" ")[0].replace(/\//g,"").replace(/\d/g,t=>" ".repeat(+t)).slice(0,64)};function I(){const p=document.createElement("div"),e=document.createElement("div");return p.classList.add("board"),e.classList.add("masks"),{board:p,masks:e}}const G=`
	:host {
		display: block;
		container-type: inline-size;
		position: relative;
		aspect-ratio: 1 / 1;
	}
	.board, .masks {
		user-select: none;
		line-break: anywhere;
		white-space: break-spaces;
		line-height: 1;
		font-size: 12.5cqw;
		letter-spacing: -0.01cqw;
		font-family: var(--diagram-font);
	}
	.board { color: var(--diagram-stroke, #000); }
	.masks { display: none; }
	:host([colored]) .masks {
		display: block;
		position: absolute;
		inset: 0;
		z-index: -1;
		-webkit-text-stroke-width: var(--diagram-outline);
		color: var(--diagram-fill, #fff);
		background: repeating-conic-gradient(
			var(--diagram-dark, #bbb) 0% 25%,
			var(--diagram-light, #eee) 0% 50%
		) 50% / 25% 25%;
	}
`;function U(){const p=new CSSStyleSheet;return p.replaceSync(G),p}function S(p,e){return[p.toLowerCase(),""].includes(e==null?void 0:e.toLowerCase())}var u,N,h,q,b,d,f,c,E,x,Q;class M extends HTMLElement{constructor(){super();s(this,c);s(this,u,new j);s(this,N,"8/8/8/8/8/8/8/8");s(this,h,!1);s(this,q,!1);s(this,b);s(this,d);s(this,f);l(this,b,this.attachShadow({mode:"closed"}))}connectedCallback(){o(this,d)||(a(this,c,E).call(this),a(this,c,x).call(this)),a(this,c,Q).call(this)}attributeChangedCallback(t,n,r){switch(t){case"fen":l(this,N,r);break;case"flipped":l(this,h,S("flipped",r));break;case"colored":l(this,q,S("colored",r))}o(this,d)&&a(this,c,Q).call(this)}}u=new WeakMap,N=new WeakMap,h=new WeakMap,q=new WeakMap,b=new WeakMap,d=new WeakMap,f=new WeakMap,c=new WeakSet,E=function(){const{board:t,masks:n}=I();l(this,d,t),l(this,f,n),o(this,b).appendChild(o(this,d)),o(this,b).appendChild(o(this,f))},x=function(){o(this,b).adoptedStyleSheets.push(U())},Q=function(){let{board:t,masks:n}=o(this,u).encode({fen:o(this,N),colored:o(this,q)});o(this,h)&&(t=o(this,u).reverse(t)),o(this,d).textContent=t,n&&(o(this,h)&&(n=o(this,u).reverse(n)),o(this,f).textContent=n)},y(M,"observedAttributes",["fen","flipped","colored"]);const W=["Cases"];function X(p,e){p.forEach(t=>{const n=document.createElement("option");n.textContent=t,e.appendChild(n)})}function Y(p){const e=new CSSStyleSheet,t=`Diagram${p}`,n=`./fonts/${t}`,r=`${t}.woff2`;e.insertRule(`@font-face { font-family: "Diagram ${p}"; src: url("${n}/${r}"); font-display: block; }`),document.adoptedStyleSheets.push(e)}function Z(p){const e=document.querySelector("#app");let t=`--diagram-font: Diagram ${p};`;p==="Assistant"&&(t+=" --diagram-spacing: -0.4cqw"),e.setAttribute("style",t)}function v(p){Y(p),Z(p)}function V(p){const e=fetch("https://lichess.org/api/tv/feed"),t=r=>p(r),n=()=>console.log("The stream has completed");e.then(ee(t)).then(n)}const ee=p=>e=>{const t=e.body.getReader(),n=/\r?\n/,r=new TextDecoder;let P="";const k=()=>t.read().then(({done:O,value:T})=>{if(O)P.length>0&&p(JSON.parse(P));else{const $=r.decode(T,{stream:!0});P+=$;const B=P.split(n);P=B.pop();for(const D of B.filter(F=>F))p(JSON.parse(D));return k()}});return k()},pe=["rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1","rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq - 0 1","rnbqkbnr/pppp1ppp/8/4p3/4P3/8/PPPP1PPP/RNBQKBNR w KQkq - 0 2","rnbqkbnr/pppp1ppp/8/4p3/4PP2/8/PPPP2PP/RNBQKBNR b KQkq - 0 2","rnbqkbnr/pppp1ppp/8/8/4Pp2/8/PPPP2PP/RNBQKBNR w KQkq - 0 3","rnbqkbnr/pppp1ppp/8/8/4Pp2/5N2/PPPP2PP/RNBQKB1R b KQkq - 1 3","rnbqkb1r/pppp1ppp/5n2/8/4Pp2/5N2/PPPP2PP/RNBQKB1R w KQkq - 2 4","rnbqkb1r/pppp1ppp/5n2/4P3/5p2/5N2/PPPP2PP/RNBQKB1R b KQkq - 0 4","rnbqkb1r/pppp1ppp/8/4P3/5pn1/5N2/PPPP2PP/RNBQKB1R w KQkq - 1 5","rnbqkb1r/pppp1ppp/8/4P3/3P1pn1/5N2/PPP3PP/RNBQKB1R b KQkq - 0 5","rnbqkb1r/pppp1p1p/8/4P1p1/3P1pn1/5N2/PPP3PP/RNBQKB1R w KQkq - 0 6","rnbqkb1r/pppp1p1p/8/4P1p1/3P1pn1/2N2N2/PPP3PP/R1BQKB1R b KQkq - 1 6","rnbqkb1r/pppp1p1p/8/4P1p1/3P1p2/2N1nN2/PPP3PP/R1BQKB1R w KQkq - 2 7","rnbqkb1r/pppp1p1p/8/4P1p1/3P1p2/2N1nN2/PPP1Q1PP/R1B1KB1R b KQkq - 3 7","rnbqkb1r/pppp1p1p/8/4P1p1/3P1p2/2N2N2/PPP1Q1PP/R1B1Kn1R w KQkq - 0 8","rnbqkb1r/pppp1p1p/8/4P1p1/3PNp2/5N2/PPP1Q1PP/R1B1Kn1R b KQkq - 1 8","rnbqkb1r/pppp1p1p/8/4P1p1/3PNp2/4nN2/PPP1Q1PP/R1B1K2R w KQkq - 2 9","rnbqkb1r/pppp1p1p/5N2/4P1p1/3P1p2/4nN2/PPP1Q1PP/R1B1K2R b KQkq - 3 9","rnbq1b1r/ppppkp1p/5N2/4P1p1/3P1p2/4nN2/PPP1Q1PP/R1B1K2R w KQ - 4 10","rnbq1b1r/ppppkp1p/5N2/4P1p1/3P1p2/4nN2/PPPBQ1PP/R3K2R b KQ - 5 10","rnbq1b1r/ppppkp1p/5N2/4P1p1/3P1p2/5N2/PPnBQ1PP/R3K2R w KQ - 0 11","rnbq1b1r/ppppkp1p/5N2/4P1p1/3P1p2/5N2/PPnBQKPP/R6R b - - 1 11","rnbq1b1r/ppppkp1p/5N2/4P1p1/3P1p2/5N2/PP1BQKPP/n6R w - - 0 12","rnbq1b1r/ppppkp1p/8/3NP1p1/3P1p2/5N2/PP1BQKPP/n6R b - - 1 12","rnbq1b1r/pppp1p1p/4k3/3NP1p1/3P1p2/5N2/PP1BQKPP/n6R w - - 2 13","rnbq1b1r/pppp1p1p/4k3/3NP1p1/2QP1p2/5N2/PP1B1KPP/n6R b - - 3 13","rnbq1b1r/p1pp1p1p/4k3/1p1NP1p1/2QP1p2/5N2/PP1B1KPP/n6R w - - 0 14","rnbq1b1r/p1pp1p1p/4k3/1p1NP1N1/2QP1p2/8/PP1B1KPP/n6R b - - 0 14","rnb2b1r/p1pp1p1p/4k3/1p1NP1q1/2QP1p2/8/PP1B1KPP/n6R w - - 0 15","rnb2b1r/p1Np1p1p/4k3/1p2P1q1/2QP1p2/8/PP1B1KPP/n6R b - - 0 15","rnb2b1r/p1Npkp1p/8/1p2P1q1/2QP1p2/8/PP1B1KPP/n6R w - - 1 16","rnb2b1r/p2pkp1p/8/1p1NP1q1/2QP1p2/8/PP1B1KPP/n6R b - - 2 16","rnb2b1r/p2p1p1p/4k3/1p1NP1q1/2QP1p2/8/PP1B1KPP/n6R w - - 3 17","rnb2b1r/p2p1p1p/4k3/1p2P1q1/2QP1N2/8/PP1B1KPP/n6R b - - 0 17","rnb2b1r/p2pkp1p/8/1p2P1q1/2QP1N2/8/PP1B1KPP/n6R w - - 1 18","rnb2b1r/p2pkp1p/8/1p1NP1q1/2QP4/8/PP1B1KPP/n6R b - - 2 18","rnb1kb1r/p2p1p1p/8/1p1NP1q1/2QP4/8/PP1B1KPP/n6R w - - 3 19","rnQ1kb1r/p2p1p1p/8/1p1NP1q1/3P4/8/PP1B1KPP/n6R b - - 0 19","rnQqkb1r/p2p1p1p/8/1p1NP3/3P4/8/PP1B1KPP/n6R w - - 1 20","rnQqkb1r/p1Np1p1p/8/1p2P3/3P4/8/PP1B1KPP/n6R b - - 2 20","rnQq1b1r/p1Npkp1p/8/1p2P3/3P4/8/PP1B1KPP/n6R w - - 3 21","rnQq1b1r/p1Npkp1p/8/1p2P3/1B1P4/8/PP3KPP/n6R b - - 4 21","rnQq1b1r/p1N1kp1p/3p4/1p2P3/1B1P4/8/PP3KPP/n6R w - - 0 22","rnQq1b1r/p1N1kp1p/3B4/1p2P3/3P4/8/PP3KPP/n6R b - - 0 22","rnQ2b1r/p1N1kp1p/3q4/1p2P3/3P4/8/PP3KPP/n6R w - - 0 23","rn2Qb1r/p1N1kp1p/3q4/1p2P3/3P4/8/PP3KPP/n6R b - - 1 23"];function te(){const{random:p}=Math,e=p(),t=(n,r)=>n+p()*r;return e<.05?t(0,200):e<.1?t(2e3,1e3):e<.35?t(900,600):t(300,600)}const re=p=>new Promise(e=>setTimeout(e,p));async function ne(p){for(const e of pe)p({d:{fen:e}}),await re(te())}customElements.define("demo-diagram",M);{const p=document.querySelector("#typography");X(W,p),v(p.value),p.addEventListener("change",({target:e})=>v(e.value))}{let e=function(t){document.querySelectorAll("demo-diagram").forEach(n=>t?n.setAttribute("colored","colored"):n.removeAttribute("colored"))};var oe=e;const p=document.querySelector("#colored");e(p.checked),p.addEventListener("change",({target:t})=>e(t.checked))}{let p=function({players:e,isFlipped:t,figure:n}){let[r,P]=n.querySelectorAll(".player");t&&([r,P]=[P,r]),P.classList.remove("accent"),r.classList.add("accent"),P.textContent=e[0].user.name,r.textContent=e[1].user.name};var se=p;V(({t:e,d:t})=>{const n=document.querySelector("figure#live"),r=n.querySelector("demo-diagram");if(r.setAttribute("fen",t.fen),e==="featured"){const P=t.orientation==="black";P?r.setAttribute("flipped","flipped"):r.removeAttribute("flipped"),p({...t,isFlipped:P,figure:n})}})}ne(({d:p})=>{document.querySelector("figure#bronstein").querySelector("demo-diagram").setAttribute("fen",p.fen)});
